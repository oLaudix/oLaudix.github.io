<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.16.0.css">
<link rel="stylesheet" href="../bootstrap.min.css">
<link rel="stylesheet" href="../custom.css">

<title>My Page</title>
  <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>-->
</head>
<style>
.container {
    position: relative;
    text-align: center;
    color: black;
}

textarea {
  background: transparent;
  color: black;
  border: 0 none;
  resize: none;
  outline: none;
}

</style>
<body>
		<div class="panel panel-primary" style="float: left; width: 200px; position: absolute; margin-right: 4px">
			<div class="panel-heading"></div>
			<div class="panel-body">
				<textarea id="log" style="width: 100%; height: 250px; display: inline-block;"></textarea>
				<button type="button" onclick="Save()" class="btn btn-default">Save</button><br>
				<button type="button" onclick="Load()" class="btn btn-default">Load</button><br>
				<button type="button" onclick="Reset()" class="btn btn-default">Reset</button>
			</div>
		</div>

<div class="container" id="main">
  <img src="Form-PIT-37-22-2015-2016-1.png" alt="Norway" style="width:100%;"><br><br>
  <img src="Form-PIT-37-22-2015-2016-2.png" alt="Norway" style="width:100%;">
  <img src="Form-PIT-37-22-2015-2016-3.png" alt="Norway" style="width:100%;">
  <img src="Form-PIT-37-22-2015-2016-4.png" alt="Norway" style="width:100%;">
</div>
  
<script type="text/javascript" src="../jquery-latest.min.js"></script>
<script type="text/javascript" src="../bootstrap.min.js"></script>
<script type="text/javascript" src="../pako.js"></script>



<script language="javascript">/* Write JavaScript here */
var pola = 
[
	//1 Strona
	{id:"_1", x:124, y:68, width:249, height:25, data:""},
	{id:"_2", x:124, y:104, width:249, height:25, data:""},
	{id:"_5", x:504, y:213, width:85, height:25, data:""},
	{id:"_6_1", x:105, y:512, width:25, height:25, data:""},
	{id:"_6_2", x:238, y:512, width:25, height:25, data:""},
	{id:"_6_3", x:477, y:512, width:25, height:25, data:""},
	{id:"_6_4", x:703, y:512, width:25, height:25, data:""},
	{id:"_7", x:105, y:553, width:25, height:25, data:""},
	{id:"_8", x:105, y:574, width:25, height:25, data:""},
	{id:"_9", x:109, y:687, width:750, height:25, data:""},
	{id:"_10_1", x:340, y:718, width:25, height:25, data:""},
	{id:"_10_2", x:513, y:718, width:25, height:25, data:""},
	{id:"_11", x:115, y:834, width:250, height:25, data:""},
	{id:"_12", x:437, y:834, width:200, height:25, data:""},
	{id:"_13", x:688, y:834, width:200, height:25, data:""},
	{id:"_14", x:115, y:871, width:130, height:25, data:""},
	{id:"_15", x:286, y:871, width:250, height:25, data:""},
	{id:"_16", x:638, y:871, width:250, height:25, data:""},
	{id:"_17", x:115, y:908, width:130, height:25, data:""},
	{id:"_18", x:325, y:908, width:300, height:25, data:""},
	{id:"_19", x:732, y:908, width:50, height:25, data:""},
	{id:"_20", x:820, y:908, width:50, height:25, data:""},
	{id:"_21", x:115, y:945, width:250, height:25, data:""},
	{id:"_22", x:457, y:945, width:100, height:25, data:""},
	{id:"_23", x:589, y:945, width:100, height:25, data:""},
	{id:"_24", x:115, y:834+184, width:250, height:25, data:""},
	{id:"_25", x:437, y:834+184, width:200, height:25, data:""},
	{id:"_26", x:688, y:834+184, width:200, height:25, data:""},
	{id:"_27", x:115, y:871+184, width:130, height:25, data:""},
	{id:"_28", x:286, y:871+184, width:250, height:25, data:""},
	{id:"_29", x:638, y:871+184, width:250, height:25, data:""},
	{id:"_30", x:115, y:908+184, width:130, height:25, data:""},
	{id:"_31", x:325, y:908+184, width:300, height:25, data:""},
	{id:"_32", x:732, y:908+184, width:50, height:25, data:""},
	{id:"_33", x:820, y:908+184, width:50, height:25, data:""},
	{id:"_34", x:115, y:945+184, width:250, height:25, data:""},
	{id:"_35", x:457, y:945+184, width:100, height:25, data:""},
	{id:"_36", x:589, y:945+184, width:100, height:25, data:""},
	//2 Strona
	{id:"_37", x:277, y:1491, width:110, height:25, data:""},
	{id:"_38", x:398, y:1491, width:110, height:25, data:""},
	{id:"_39", x:519, y:1491, width:110, height:25, data:""},
	{id:"_40", x:640, y:1491, width:110, height:25, data:""},
	{id:"_41", x:761, y:1491, width:110, height:25, data:""},
	{id:"_42", x:277, y:1544, width:110, height:25, data:""},
	{id:"_43", x:398, y:1544, width:110, height:25, data:""},
	{id:"_44", x:277, y:1587, width:110, height:25, data:""},
	{id:"_45", x:519, y:1587, width:110, height:25, data:""},
	{id:"_46", x:761, y:1587, width:110, height:25, data:""},
	{id:"_47", x:277, y:1623, width:110, height:25, data:""},
	{id:"_48", x:398, y:1623, width:110, height:25, data:""},
	{id:"_49", x:519, y:1623, width:110, height:25, data:""},
	{id:"_50", x:640, y:1623, width:110, height:25, data:""},
	{id:"_51", x:761, y:1623, width:110, height:25, data:""},
	{id:"_52", x:277, y:1662, width:110, height:25, data:""},
	{id:"_53", x:398, y:1662, width:110, height:25, data:""},
	{id:"_54", x:519, y:1662, width:110, height:25, data:""},
	{id:"_55", x:640, y:1662, width:110, height:25, data:""},
	{id:"_56", x:761, y:1662, width:110, height:25, data:""},
	{id:"_57", x:277, y:1700, width:110, height:25, data:""},
	{id:"_58", x:398, y:1700, width:110, height:25, data:""},
	{id:"_59", x:277, y:1741, width:110, height:25, data:""},
	{id:"_60", x:398, y:1741, width:110, height:25, data:""},
	{id:"_61", x:519, y:1741, width:110, height:25, data:""},
	{id:"_62", x:640, y:1741, width:110, height:25, data:""},
	{id:"_63", x:761, y:1741, width:110, height:25, data:""},
	{id:"_64", x:277, y:1779, width:110, height:25, data:""},
	{id:"_65", x:398, y:1779, width:110, height:25, data:""},
	{id:"_66", x:519, y:1779, width:110, height:25, data:""},
	{id:"_67", x:761, y:1779, width:110, height:25, data:""},
	{id:"_68", x:277, y:1491+365, width:110, height:25, data:""},
	{id:"_69", x:398, y:1491+365, width:110, height:25, data:""},
	{id:"_70", x:519, y:1491+365, width:110, height:25, data:""},
	{id:"_71", x:640, y:1491+365, width:110, height:25, data:""},
	{id:"_72", x:761, y:1491+365, width:110, height:25, data:""},
	{id:"_73", x:277, y:1544+365, width:110, height:25, data:""},
	{id:"_74", x:398, y:1544+365, width:110, height:25, data:""},
	{id:"_75", x:277, y:1587+365, width:110, height:25, data:""},
	{id:"_76", x:519, y:1587+365, width:110, height:25, data:""},
	{id:"_77", x:761, y:1587+365, width:110, height:25, data:""},
	{id:"_78", x:277, y:1623+365, width:110, height:25, data:""},
	{id:"_79", x:398, y:1623+365, width:110, height:25, data:""},
	{id:"_80", x:519, y:1623+365, width:110, height:25, data:""},
	{id:"_81", x:640, y:1623+365, width:110, height:25, data:""},
	{id:"_82", x:761, y:1623+365, width:110, height:25, data:""},
	{id:"_83", x:277, y:1662+365, width:110, height:25, data:""},
	{id:"_84", x:398, y:1662+365, width:110, height:25, data:""},
	{id:"_85", x:519, y:1662+365, width:110, height:25, data:""},
	{id:"_86", x:640, y:1662+365, width:110, height:25, data:""},
	{id:"_87", x:761, y:1662+365, width:110, height:25, data:""},
	{id:"_88", x:277, y:1700+365, width:110, height:25, data:""},
	{id:"_89", x:398, y:1700+365, width:110, height:25, data:""},
	{id:"_90", x:277, y:1741+365, width:110, height:25, data:""},
	{id:"_91", x:398, y:1741+365, width:110, height:25, data:""},
	{id:"_92", x:519, y:1741+365, width:110, height:25, data:""},
	{id:"_93", x:640, y:1741+365, width:110, height:25, data:""},
	{id:"_94", x:761, y:1741+365, width:110, height:25, data:""},
	{id:"_95", x:277, y:1779+365, width:110, height:25, data:""},
	{id:"_96", x:398, y:1779+365, width:110, height:25, data:""},
	{id:"_97", x:519, y:1779+365, width:110, height:25, data:""},
	{id:"_98", x:761, y:1779+365, width:110, height:25, data:""},
	{id:"_99", x:574, y:2215, width:145, height:25, data:""},
	{id:"_100", x:729, y:2215, width:145, height:25, data:""},
	{id:"_101", x:574, y:2252, width:145, height:25, data:""},
	{id:"_102", x:729, y:2252, width:145, height:25, data:""},
	{id:"_103", x:574, y:2289, width:145, height:25, data:""},
	{id:"_104", x:729, y:2289, width:145, height:25, data:""},
	{id:"_105", x:574, y:2326, width:145, height:25, data:""},
	{id:"_106", x:729, y:2326, width:145, height:25, data:""},
	{id:"_107", x:574, y:2362, width:300, height:25, data:""},
	{id:"_108", x:574, y:2399, width:300, height:25, data:""},
	{id:"_109", x:574, y:2436, width:300, height:25, data:""},
	{id:"_110", x:574, y:2473, width:300, height:25, data:""},
	{id:"_111", x:574, y:2510, width:300, height:25, data:""},
	//3 Strona
	{id:"_112", x:581, y:2699, width:300, height:25, data:""},
	{id:"_113", x:581, y:2736, width:300, height:25, data:""},
	{id:"_114", x:581, y:2773, width:300, height:25, data:""},
	{id:"_115", x:581, y:2810, width:300, height:25, data:""},
	{id:"_116", x:581, y:2881, width:145, height:25, data:""},
	{id:"_117", x:737, y:2881, width:145, height:25, data:""},
	{id:"_118", x:581, y:2918, width:145, height:25, data:""},
	{id:"_119", x:737, y:2918, width:145, height:25, data:""},
	{id:"_120", x:581, y:2955, width:145, height:25, data:""},
	{id:"_121", x:737, y:2955, width:145, height:25, data:""},
	{id:"_122", x:581, y:2992, width:300, height:25, data:""},
	{id:"_123", x:581, y:3029, width:300, height:25, data:""},
	{id:"_124", x:581, y:3066, width:300, height:25, data:""},
	{id:"_125", x:581, y:3103, width:300, height:25, data:""},
	{id:"_126", x:581, y:3168, width:300, height:25, data:""},
	{id:"_127", x:581, y:3204, width:300, height:25, data:""},
	{id:"_128", x:581, y:3239, width:300, height:25, data:""},
	{id:"_129", x:581, y:3275, width:300, height:25, data:""},
	{id:"_130", x:582, y:3363, width:145, height:25, data:""},
	{id:"_131", x:738, y:3363, width:145, height:25, data:""},
	{id:"_132", x:582, y:3415, width:145, height:25, data:""},
	{id:"_133", x:738, y:3415, width:145, height:25, data:""},
	{id:"_134", x:582, y:3473, width:300, height:25, data:""},
	{id:"_135", x:582, y:3510, width:300, height:25, data:""},
	{id:"_136", x:666, y:3555, width:200, height:25, data:""},
	{id:"_137", x:100, y:3660, width:250, height:25, data:""},
	{id:"_138", x:737, y:3659, width:150, height:25, data:""},
	{id:"_139", x:100, y:3758, width:500, height:25, data:""},
	{id:"_140", x:818, y:3762, width:25, height:25, data:""},
	{id:"_141", x:100, y:3794, width:600, height:25, data:""},
	//4 Strona
	{id:"_142", x:92, y:4050, width:50, height:25, data:""},
	{id:"_143", x:155, y:4050, width:50, height:25, data:""},
	{id:"_143", x:224, y:4050, width:50, height:25, data:""},
	{id:"_144", x:288, y:4050, width:100, height:25, data:""},
	{id:"_146_1", x:404, y:4049, width:25, height:25, data:""},
	{id:"_146_2", x:516, y:4049, width:25, height:25, data:""},
	{id:"_147_1", x:629, y:4051, width:25, height:25, data:""},
	{id:"_147_2", x:719, y:4051, width:25, height:25, data:""},
	{id:"_147_2", x:719, y:4051, width:25, height:25, data:""},
	{id:"_147_3", x:804, y:4051, width:25, height:25, data:""},
	{id:"_147_3", x:100, y:4095, width:500, height:25, data:""},

]
//" +  + "
for (var a = 0; a < pola.length; a++)
{
	$("#main").append("<div style=\"position: absolute; top: " + pola[a].y + "px; left: " + pola[a].x + "px;\"><textarea id=\"" + pola[a].id + "\" style=\"width: " + pola[a].width + "px; height: " + pola[a].height + "px\"></textarea><div>");
}


function saveData()
{
	for (var a = 0; a < pola.length; a++)
	{
		pola[a].data = $("textarea[id='" + pola[a].id + "']").val()
	}
	var saveVar = 
	{
		data:pola
	}
	localStorage.setItem("ProjectPIT", JSON.stringify(saveVar));
	//alert(JSON.stringify(saveVar))
	//$("#log").html(JSON.stringify(saveVar))
	//$("#savedata").html(JSON.stringify(gzip_inflate($("#savedata2").val())))
	//alert("saved")
}
function Save()
{
	var temp = [];
	for (var a = 0; a < pola.length; a++)
	{
		pola[a].data = $("textarea[id='" + pola[a].id + "']").val()
		temp[a] = {data:pola[a].data}
	}
	var saveVar = 
	{
		data:temp
	}
	//alert("test")
	$("#log").html("" + gzip_deflate(JSON.stringify(saveVar)))
}

function Load()
{
	//alert(gzip_inflate($("textarea[id='log']").val()))
	var loadVar = {}
	loadString = gzip_inflate($("textarea[id='log']").val())
	parsedString = JSON.parse(loadString)
	for (var i = 0; i < parsedString.data.length; i++) 
	{
		pola[i].data = parsedString.data[i].data;
		//alert(pola[i].data)
		$("textarea[id='" + pola[i].id + "']").val(pola[i].data)
		//$("#" + pola[i].skillID + "level").val(pola[i].level);
	}
	saveData()
	//alert(parsedString.data[0].data)
}

function Reset()
{
	for (var a = 0; a < pola.length; a++)
	{
		$("textarea[id='" + pola[a].id + "']").val("")
		pola[a].data = $("textarea[id='" + pola[a].id + "']").val()
	}
	saveData()
}

function loadData()
{
	var loadVar = {}
		loadString = localStorage.getItem("ProjectPIT")
		parsedString = JSON.parse(loadString)
		for (var i = 0; i < parsedString.data.length; i++) 
		{
			pola[i].data = parsedString.data[i].data;
			$("textarea[id='" + pola[i].id + "']").val(pola[i].data)
			//$("#" + pola[i].skillID + "level").val(pola[i].level);
		}
	
}

function gzip_inflate(blueprintInput)
{
	//var version = blueprintInput[0];
	var decoded = atob(blueprintInput);
	var arrayBuffer = new Uint8Array(new ArrayBuffer(decoded.length));
	for (var i = 0; i < decoded.length; i++) 
	{
		arrayBuffer[i] = decoded.charCodeAt(i);
    }
	var data = JSON.parse(pako.inflate(arrayBuffer, { to: "string" }));
	return data;
}
function gzip_deflate(string)
{
	var output = pako.deflate(JSON.stringify(string),{ to: 'string' });
	var output64base = btoa(output)
	return btoa(pako.deflate(JSON.stringify(string), { to: "string" }));
}


/*$( "input[type=text]" ).focusout(function() {
	saveData()
});*/

$( 'textarea' ).focusout(function() {
	saveData()
});

/*$( "input[type=checkbox]" ).change(function() {
	saveData()
});*/

/*$("#main").click(function(e){
    var x = e.pageX - this.offsetLeft;
    var y = e.pageY - this.offsetTop;
	$( "#log" ).text( "pageX: " + x + ", pageY: " + y );
	alert("pageX: " + x + ", pageY: " + y)
}); */

loadData();
</script></body></html>