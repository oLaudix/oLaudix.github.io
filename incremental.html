<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.16.0.css">
<link rel="stylesheet" href="bootstrap.min.css">
<link rel="stylesheet" href="custom.css">
<title>My Page</title>
  <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>-->
</head>
<body>
	<div style="float: left; width: 180px;">
		<ul class="nav nav-tabs nav-stacked">
			<li><a href=".">Home</a></li>
			<li><a href="TTcalc.html">Tap Titans Calculator</a></li>
			<li><a href="stuff.html">Tap Titans usefull stuff</a></li>
			<li><a href="MCcalc.html">Mine Clicker Calculator</a></li>
			<li><a href="SMCG.html">Simulation Craft Stuff</a></li>
			<li><a href="CivCrafter.html">Civ Crafter Stuff</a></li>
			<li><a href="ShonenIdle.html">Shonen Idle Stuff</a></li>
			<li><a href="incremental.html">Testing</a></li>
		</ul>
	</div>
	<div class="wrapper" style="display: inline-block;">
	<div id="testing"></div>
	<div id="testing2"></div>
	<canvas id="myCanvas" width="400" height="500" style="border:1px solid #000000;">
	<canvas id="buffer" width="400" height="500">
	
	</canvas>
	</div>
  
  
<script type="text/javascript" src="jquery-latest.min.js"></script>
<script type="text/javascript" src="bootstrap.min.js"></script>
<script src="incremental.js"></script>



<script language="javascript">/* Write JavaScript here */
//$(window).load(function start(){

var monster = function()
{
	this.cycle = 0;
	this.positionX = RandomIntRange(-100,-50);
	this.old_positionX = -50;
	this.positionY = RandomIntRange(0,450)
	this.old_positionY = this.positionY
	this.img1 = new Image();
	this.img1.src = "img/player.png";
	this.spriteW = 24;
	this.spriteH = 30;
	this.speed = RandomIntRange(4,8)
	//alert(this.img1.src)
	this.c = document.getElementById("myCanvas");
	this.ctx = this.c.getContext("2d");
	this.animation = function()
	{
	
	
		
		
		/*var bufferCanvas = document.getElementById("buffer");
		var buffer = bufferCanvas.getContext("2d");

		// Draw your image on the buffer
		buffer.drawImage(this.img1,
							// source rectangle
							((this.cycle - 1) * this.spriteW, 0, this.spriteW, this.spriteH,
							// destination rectangle
							0, 0, this.spriteW, this.spriteH);

		// Draw a rectangle over the image using a nice translucent overlay
		buffer.save();
		buffer.globalCompositeOperation = "source-in";
		buffer.fillStyle = "rgba(256, 256, 256, 1)"; // red
		buffer.fillRect(0, 0, this.spriteW, this.spriteH);
		buffer.restore();

		// Copy the buffer onto the visible canvas
		this.ctx.drawImage(bufferCanvas, this.old_positionX, this.old_positionY);
		*/
	
	
	
		this.ctx.clearRect(this.old_positionX, this.old_positionY, this.spriteW, this.spriteH);
		this.ctx.drawImage(	this.img1,
							// source rectangle
							this.cycle * this.spriteW, 0, this.spriteW, this.spriteH,
							// destination rectangle
							this.positionX, this.positionY, this.spriteW, this.spriteH);
		this.old_positionX = this.positionX
		if (this.positionX > 400)
		{
			//this.ctx.clearRect(this.old_positionX, this.old_positionY, this.spriteW, this.spriteH);
			this.positionX = RandomIntRange(-100,-50);;
			this.positionY = RandomIntRange(0,450)
			this.old_positionY = this.positionY
		}
		else
		{
			this.positionX += +4
		}
		this.cycle = (this.cycle + 1) % 8;
		//alert("narysowane")
		var $this = this;
		setTimeout(function() { $this.animation() }, 50)
	}
}
	
var monsters = []
for (var x = 0; x < 90; x++)
{
	monsters.push(new monster)
	//monsters[x].animation();
}




var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

function animation2(monsterList)
{
	ctx.clearRect(0, 0, c.width, c.height);
	for (var x = 0; x < monsterList.length; x++)
	{
		//ctx.clearRect(monsterList[x].old_positionX, monsterList[x].old_positionY, monsterList[x].spriteW, monsterList[x].spriteH);
		ctx.drawImage(	monsterList[x].img1,
							// source rectangle
							monsterList[x].cycle * monsterList[x].spriteW, 0, monsterList[x].spriteW, monsterList[x].spriteH,
							// destination rectangle
							monsterList[x].positionX, monsterList[x].positionY, monsterList[x].spriteW, monsterList[x].spriteH);
		monsterList[x].old_positionX = monsterList[x].positionX
		if (monsterList[x].positionX > 400)
		{
			//monsterList[x].ctx.clearRect(monsterList[x].old_positionX, monsterList[x].old_positionY, monsterList[x].spriteW, monsterList[x].spriteH);
			monsterList[x].positionX = RandomIntRange(-100,-50);;
			monsterList[x].positionY = RandomIntRange(0,450)
			monsterList[x].old_positionY = monsterList[x].positionY
		}
		else
		{
			monsterList[x].positionX += monsterList[x].speed
		}
		monsterList[x].cycle = (monsterList[x].cycle + 1) % 8;
		//alert("narysowane")
		//var $monsterList[x] = monsterList[x];
	}
	setTimeout(function() { animation2(monsterList) }, 60)
}

animation2(monsters)


</script></body></html>